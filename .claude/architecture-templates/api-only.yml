# API Service Architecture
project:
  name: "${PROJECT_NAME}"
  type: "api"
  description: "RESTful API service"

stack:
  backend:
    language: "python"
    framework: "fastapi"
    version: "3.11"
    packages:
      - fastapi==0.104.1
      - sqlalchemy==2.0.23
      - alembic==1.12.1
      - psycopg2-binary==2.9.9
      - redis==5.0.1
      - pydantic==2.5.0
      - python-jose[cryptography]==3.3.0
      - passlib[bcrypt]==1.7.4
      - python-dotenv==1.0.0
      - uvicorn[standard]==0.24.0
      - httpx==0.25.2  # For external API calls
      - celery==5.3.4  # For background tasks
  
  database:
    primary: "postgresql"
    version: "15"
    cache: "redis"
    cache_version: "7"
    
  infrastructure:
    containerization: "docker"
    orchestration: "docker-compose"
    ci_cd: "github-actions"
    api_gateway: "nginx"  # Optional

structure:
  create_dirs:
    - apps/api/src/routers
    - apps/api/src/models
    - apps/api/src/services
    - apps/api/src/schemas
    - apps/api/tests/unit
    - apps/api/tests/integration
    - apps/api/migrations
    - infrastructure
    - scripts
    - docs/api

  ignore_dirs:
    - apps/web
    - mobile
    - desktop

development:
  ports:
    api: 8000
    db: 5432
    redis: 6379
    
  environment:
    - DATABASE_URL=postgresql://postgres:postgres@localhost:5432/${PROJECT_NAME}_db
    - REDIS_URL=redis://localhost:6379/0
    - SECRET_KEY=your-secret-key-change-in-production
    - CORS_ORIGINS=http://localhost:3000,http://localhost:8080
    - API_VERSION=v1

testing:
  backend:
    framework: "pytest"
    coverage: 85
    tools:
      - pytest-asyncio
      - pytest-cov
      - httpx  # For API testing
    
deployment:
  strategy: "rolling"
  platforms:
    - railway
    - aws-ecs
    - gcp-cloud-run
    - heroku